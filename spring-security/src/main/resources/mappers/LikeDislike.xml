<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.study.security20240312yeonho.boardDomain.board.LikeDislikeRepository">
    <insert id="saveLike" parameterType="com.study.security20240312yeonho.boardDomain.board.LikeDislike">
        INSERT INTO like_list (board_code, user_code, is_liked)
        VALUES (#{boardCode}, 75, #{isLiked})
    </insert>

    <insert id="saveDislike" parameterType="com.study.security20240312yeonho.boardDomain.board.LikeDislike">
        INSERT INTO dislike_list (board_code, user_code, is_disliked)
        VALUES (#{boardCode}, 75, #{isDisliked})
    </insert>

    <select id="getLikeCount" resultType="com.study.security20240312yeonho.boardDomain.board.LikeDislike">
        SELECT COUNT(*) 
        FROM like_list
        WHERE board_code = #{boardCode}
    </select>

    <select id="getDislikeCount" resultType="com.study.security20240312yeonho.boardDomain.board.LikeDislike">
        SELECT COUNT(*)
        FROM dislike_list
        WHERE board_code = #{boardCode}
    </select>
	
	<delete id="deleteLike" parameterType="com.study.security20240312yeonho.boardDomain.board.LikeDislike">
	    DELETE FROM like_list
	    WHERE board_code = #{boardCode} AND user_code = #{userCode}
	</delete>
	
	<delete id="deleteDislike" parameterType="com.study.security20240312yeonho.boardDomain.board.LikeDislike">
	    DELETE FROM dislike_list
	    WHERE board_code = #{boardCode} AND user_code = #{userCode}
	</delete>
	
    
<!--    <update id="updateLikeCount" parameterType="com.example.okkyjobs.domain.board.Board">-->
<!--	    UPDATE board_mst-->
<!--	    SET like_code = #{likeCount}-->
<!--	    WHERE board_code = #{boardCode}-->
<!--	</update>-->
	
<!--	<update id="updateDislikeCount" parameterType="com.example.okkyjobs.domain.board.Board">-->
<!--	    UPDATE board_mst-->
<!--	    SET dislike_code = #{dislikeCount}-->
<!--	    WHERE board_code = #{boardCode}-->
<!--	</update>-->
	

<!--    <select id="isLiked" resultType="boolean">-->
<!--        SELECT COUNT(*) > 0-->
<!--        FROM like_list-->
<!--        WHERE board_code = #{boardCode} AND user_code = #{userCode}-->
<!--    </select>-->

<!--    <select id="isDisliked" resultType="boolean">-->
<!--        SELECT COUNT(*) > 0-->
<!--        FROM dislike_list-->
<!--        WHERE board_code = #{boardCode} AND user_code = #{userCode}-->
<!--    </select>-->
    
    
<!--     싫어요 삭제 -->
<!--    <delete id="deleteDislike">-->
<!--        DELETE FROM dislike_list-->
<!--        WHERE user_code = #{userCode} AND board_code = #{boardCode}-->
<!--    </delete>-->

</mapper>